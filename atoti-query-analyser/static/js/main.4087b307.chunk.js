(this["webpackJsonpparis-internship-queryviz"]=this["webpackJsonpparis-internship-queryviz"]||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(16),s=n.n(i),c=n(26),u=n.n(c),o=n(43),l=n(10),f=n(11),d=n(15),p=n(14),m=n(80),h=n(39),v=n(13),g=n(20),y=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(l.a)(this,n),(r=t.call(this,e)).saveInput=function(e){r.setState({input:e.target.value})},r.checkRadio=function(e){return function(){return r.setState({type:e})}},r.submitJson=function(){r.props.passInput("json",r.state.type,r.state.input)},r.submitV1=function(){r.props.passInput("v1",r.state.type,r.state.input)},r.importFromServer=function(){r.state.urlMode?r.submitQuery():r.prepareImport()},r.prepareImport=function(){r.setState({urlMode:!0})},r.submitQuery=function(){var e=btoa("".concat(r.state.username,":").concat(r.state.password));r.props.passInput("url",r.state.type,{url:r.state.url,query:r.state.input,credentials:"Basic ".concat(e)}),r.setState({type:"default"})},r.saveToLocalStorage=function(){window.localStorage.setItem("dev.input",r.state.input)},r.loadFromLocalStorage=function(){var e=window.localStorage.getItem("dev.input");r.setState({input:e||""})};var a=new URL(window.location.href);return r.state={input:r.props.lastInput,type:"classic",urlMode:!1,username:"",password:"",url:"",devMode:a.search.includes("dev")},r}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.input,r=t.urlMode,i=t.url,s=t.username,c=t.password,u=t.type;return a.a.createElement(v.a,{className:"mx-4 my-4"},a.a.createElement(v.a.Group,{controlId:"query-input"},a.a.createElement(v.a.Control,{as:"textarea",rows:"10",defaultValue:n,onChange:this.saveInput})),r?a.a.createElement(m.a,null,a.a.createElement(h.a,{md:6,lg:6},a.a.createElement(v.a.Control,{placeholder:"Server URL",defaultValue:i,onChange:function(t){return e.setState({url:t.target.value})}})),a.a.createElement(h.a,null,a.a.createElement(v.a.Control,{placeholder:"Username",defaultValue:s,onChange:function(t){return e.setState({username:t.target.value})}})),a.a.createElement(h.a,null,a.a.createElement(v.a.Control,{placeholder:"Password",type:"password",defaultValue:c,onChange:function(t){return e.setState({password:t.target.value})}}))):null,a.a.createElement("div",{key:"inline-radio",className:"mb-3"},a.a.createElement(v.a.Check,{inline:!0,label:"Classic",type:"radio",onChange:this.checkRadio("classic"),checked:"classic"===u}),a.a.createElement(v.a.Check,{inline:!0,label:"Developer",type:"radio",onChange:this.checkRadio("dev"),checked:"dev"===u})),a.a.createElement(g.a,{variant:"primary",onClick:this.submitJson},"Import from Json"),"  ",a.a.createElement(g.a,{variant:"primary",onClick:this.submitV1},"Import from V1"),"  ",a.a.createElement(g.a,{variant:"server"===r?"primary":"secondary",onClick:this.importFromServer},"Import from server"),this.state.devMode?a.a.createElement(g.a,{variant:"outline-info",onClick:this.saveToLocalStorage},"Into LS"):null,this.state.devMode?a.a.createElement(g.a,{variant:"outline-info",onClick:this.loadFromLocalStorage},"From LS"):null)}}]),n}(r.Component),E=n(6),b=n(63),I=n(9),k=n(19),w=n.n(k),O=n(5),j=n.n(O),x=j.a.shape,S=j.a.number,M=j.a.string,T=j.a.oneOf,C=j.a.arrayOf,R=j.a.bool,N=j.a.oneOfType,P=x({id:S.isRequired,name:M.isRequired,childrenIds:C(j.a.number).isRequired,isSelected:R.isRequired,radius:S.isRequired,yFixed:S.isRequired,status:T([null,"root","leaf"])}),q=(x({source:N([S,P]).isRequired,target:N([S,P]).isRequired,id:M.isRequired}),x({type:M.isRequired,retrId:S.isRequired,measureProvider:M.isRequired,measures:C(M).isRequired,partitioning:M.isRequired}),function(e){return e.isSelected?"#2E2E2E":0===e.childrenIds.length?"#BFBFBF":"#E0281C"}),G=new Map([["DistributedAggregatesRetrieval","#549ce8"],["DistributedPostProcessedRetrieval","#f28e2c"],["JITPrimitiveAggregatesRetrieval","#e15759"],["NoOpPrimitiveAggregatesRetrieval","#76b7b2"],["PostProcessedAggregatesRetrieval","#59a14f"],["PostProcessedResultsMerger","#edc949"],["PrimitiveResultsMerger","#af7aa1"],["RangeSharingPrimitiveAggregatesRetrieval","#ff9da7"],["RangeSharingLinearPostProcessorAggregatesRetrieval","#9c755f"],["RangeSharingLinearPostProcessorAggregatesRetrieval","#bab0ab"]]),F=function(e){return G.get(e.details.type)||"grey"},B=function(e){e.attr("stroke-width",6).style("stroke",(function(e){return e.critical?"#b30000":"#1B1978"})).style("opacity",".8")},D=function(e){e.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y}))},A=function(e){return Math.max(4*Math.sqrt(e.radius),10)},Q=function(e){e.select("circle").attr("r",A).style("fill",(function(e){return F(e)})).style("stroke-width",(function(e){return e.isSelected?3:1})).style("stroke",(function(e){return q(e)})),e.select("rect").attr("width",(function(e){return 2*A(e)})).attr("height",(function(e){return 2*A(e)})).attr("rx","3").style("fill",(function(e){return F(e)})).style("stroke-width",(function(e){return e.isSelected?3:1})).style("stroke",(function(e){return q(e)})).style("transform",(function(e){var t=A(e);return"translate(-".concat(t,"px, -").concat(t,"px)")})),e.select("text").attr("dy",".35em").attr("dx","-0.65em")},L=function(e){e.attr("transform",(function(e){return"translate(".concat(e.x,",").concat(e.y,")")})).select("circle").style("stroke-width",(function(e){return e.isSelected?3:1})).style("stroke",(function(e){return q(e)})),e.attr("transform",(function(e){return"translate(".concat(e.x,",").concat(e.y,")")})).select("rect").style("stroke-width",(function(e){return e.isSelected?3:1})).style("stroke",(function(e){return q(e)}))},z=function(e){e.selectAll(".node").call(L),e.selectAll(".link").call(D)},J=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.d3Link=I.i(s.a.findDOMNode(this)).datum(this.props.link).call(B)}},{key:"componentDidUpdate",value:function(){this.d3Link.datum(this.props.link).call(D)}},{key:"render",value:function(){return a.a.createElement("line",{className:"link"})}}]),n}(r.Component),V=n(67),U=(n(108),function(e){var t=e.values,n=e.selected;return a.a.createElement(a.a.Fragment,null,"[",t.map((function(e,t,r){return a.a.createElement("span",{key:t},a.a.createElement("span",{className:t===n?"selected-partition":""},e),t<r.length-1?",":"")})),"]")}),_=function(e){var t=e.startTime,n=e.elapsedTime,r=e.measures,i=e.location,s=e.partitioning,c=e.partition,u=void 0===c?JSON.stringify(t):a.a.createElement(U,{values:t,selected:c}),o=void 0===c?JSON.stringify(n):a.a.createElement(U,{values:n,selected:c});return a.a.createElement("ul",null,a.a.createElement("li",null,"Start: ",u),a.a.createElement("li",null,"Elapsed: ",o),a.a.createElement("li",null,"Measures:",a.a.createElement("ul",null,r.map((function(e){return a.a.createElement("li",{key:e},e)})))),a.a.createElement("li",null,"Location:",a.a.createElement("ul",null,i.map((function(e){return a.a.createElement("li",{key:"".concat(e.dimension,"@").concat(e.hierarchy)},e.dimension,"@",e.hierarchy,e.level.map((function(t,n){return":".concat(t,"=").concat(e.path[n])})))})))),a.a.createElement("li",null,"Partitioning: ",s))},W=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).handle=function(){var e=r.props,t=e.node.id;(0,e.clickNode)(t)},r.myRef=a.a.createRef(),r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.d3Node=I.i(s.a.findDOMNode(this)).datum(this.props.node).call(Q)}},{key:"componentDidUpdate",value:function(){this.d3Node.call(L).style("stroke-width",this.props.node.isSelected?2:0)}},{key:"render",value:function(){var e=this.props,t=e.node,n=e.changeGraph,r=e.clickNode,i=t.details,s=t.name,c=t.childrenIds,u=t.isSelected,o=t.status,l=i.type,f=i.startTimes,d=i.elapsedTimes,p=i.measures,m=i.partitioning,h=i.location,v=a.a.createElement(V.a,{style:{maxWidth:"800px"}},a.a.createElement(V.a.Title,{as:"h3"},"".concat(l," (#").concat(s,")"),a.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){return r(null)},value:"\xd7"},a.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),a.a.createElement(V.a.Content,null,a.a.createElement(_,{startTime:f,elapsedTime:d,measures:p,location:h,partitioning:m}),c.map((function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{key:e,type:"button",className:"btn btn-primary",onClick:function(){return n(e)}},"Enter sub-query ",e,".")," ")})))),g="leaf"===o?"rect":"circle";return a.a.createElement(a.a.Fragment,null,a.a.createElement("g",{className:"node"},a.a.createElement(g,{ref:this.myRef,onClick:this.handle.bind(this)}),a.a.createElement("text",{onClick:this.handle},s)),a.a.createElement(b.a,{show:u,placement:"auto",target:this.myRef.current},v))}}]),n}(r.Component),X=n(64),H=(n(109),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).searchMeasures=function(e){var t=e.target.value.trim();if(""===t)r.setState({matchingMeasures:null});else{var n=new X.a(w.a.difference(r.props.measures,r.props.selectedMeasures),void 0,{caseSensitive:!1}).search(t);r.setState({matchingMeasures:n})}},r.state={matchingMeasures:null},r}return Object(f.a)(n,[{key:"renderMatchingMeasures",value:function(){if(null===this.state.matchingMeasures)return null;var e=this.props.onSelectedMeasure;return a.a.createElement("ul",{className:"measures"},this.state.matchingMeasures.map((function(t){return a.a.createElement("li",{key:t},a.a.createElement(g.a,{variant:"outline-success",size:"sm",onClick:function(){return e({measure:t,selected:!0})}},"+")," ",t)})))}},{key:"render",value:function(){var e=this.props,t=e.measures,n=e.selectedMeasures,r=e.onSelectedMeasure,i=n.length>0?n.map((function(e){return a.a.createElement("li",{key:e},a.a.createElement(g.a,{variant:"outline-danger",size:"sm",onClick:function(){return r({measure:e,selected:!1})}},"-")," ",e)})):[].concat(Object(E.a)(t.slice(0,5).map((function(e){return a.a.createElement("li",{key:e,className:"sample"},e)}))),[a.a.createElement("li",{key:"__sample__",className:"sample"},"...")]);return a.a.createElement("div",{className:"contextual-menu"},a.a.createElement("h5",null,"Selected measures"),a.a.createElement(v.a,null,a.a.createElement(v.a.Group,null,a.a.createElement(v.a.Control,{type:"text",placeholder:"Search a measure",defaultValue:"",onChange:this.searchMeasures}))),this.renderMatchingMeasures(),a.a.createElement("ul",{className:"measures"},i))}}]),n}(r.Component)),Y=n(7),$=function(e,t,n){for(var r=n,a=e.next();!a.done;a=e.next())r=t(r,a.value);return r},K=function(e){var t=new Map;if(0===e.size)return t;for(var n=Object(E.a)(e.get(-1)),r=[],a=function(){var a=n.shift();if(r.push(a),e.has(a))e.get(a).forEach((function(e){r.includes(e)||n.includes(e)||n.push(e);try{t.get(e).push(a)}catch(i){t.set(e,[a])}}));else try{t.get(-1).push(a)}catch(i){t.set(-1,[a])}};0!==n.length;)a();return t},Z=function(e,t){var n=function(e){return e.map((function(e){var t=e.retrievals.filter((function(e){return Object.entries(e.timingInfo).length>0})).map((function(e){return e.retrId}));return new Set(t)}))}(e);return n.forEach((function(e){return e.add(-1)})),n},ee=function(e,t){return Object.entries(e).reduce((function(e,n){var r=Object(Y.a)(n,2),a=r[0],i=r[1],s=parseInt(a,10);if(t.has(s)){var c=i.filter((function(e){return t.has(e)}));c.length>0&&e.set(s,c)}return e}),new Map)},te=function(e){for(var t=e.retrievals,n=e.dependencies,r=e.measures,a=e.selection,i=t.reduce((function(e,t){return function(e){return a.has(e.retrId)&&w.a.intersection(r,e.measures).length>0}(t)?e.add(t.retrId):e}),new Set),s=new Set(i),c=ee(n,a),u=$(i.values(),(function(e,t){var n=c.get(t);return n&&e.push.apply(e,Object(E.a)(n)),e}),[]);u.length>0;){var o=u.shift();if(!s.has(o)){s.add(o);var l=c.get(o);l&&u.push.apply(u,Object(E.a)(l))}}for(var f=K(c),d=$(i.values(),(function(e,t){var n=f.get(t);return n&&e.push.apply(e,Object(E.a)(n)),e}),[]);d.length>0;){var p=d.shift();if(!s.has(p)){s.add(p);var m=f.get(p);m&&u.push.apply(u,Object(E.a)(m))}}return s.add(-1),s},ne=function(e,t){if(0===t.size||0===e.retrievals.length)return[[]];for(var n=ee(e.dependencies,t),r=K(n),a=[Object(E.a)(r.get(-1))],i=Object(E.a)(r.get(-1)),s=Object(E.a)(new Set(i.map((function(e){return r.get(e)})).flat(2))),c=0,u=function(){var e;a[c+=1]=[];for(var t=[],u=0;u<s.length;u+=1){var o=s[u];n.get(o).every((function(e){return i.includes(e)}))&&(a[c].push(o),t.push(o))}(e=s=s.filter((function(e){return!t.includes(e)}))).push.apply(e,Object(E.a)(t.map((function(e){return r.get(e)})).flat(2))),s=s.filter((function(e){return void 0!==e})),s=Object(E.a)(new Set(s)),i.push.apply(i,t)};0!==s.length;)u();return a},re=function(e,t){e.forEach((function(e,n){var r=t[n];if(r.selection.size>0){var a=function(e,t){return e.retrievals.filter((function(e){return t.selection.has(e.retrId)})).reduce((function(e,t){return e.set(t.retrId,0),e}),new Map)}(e,r),i=ne(e,r.selection);e.retrievals.filter((function(e){return r.selection.has(e.retrId)})).forEach((function(e){a.set(e.retrId,i.filter((function(t){return t.includes(e.retrId)})).map((function(e,t){return t})))})),r.starts=a}}))},ae=function(e,t){var n=parseInt(t,10),r=0;try{r=Math.max.apply(Math,Object(E.a)(e.retrievals.find((function(e){return e.retrId===n})).timingInfo.elapsedTime))}catch(a){}return r},ie=function(e,t){if(t.selection.size<2)return new Set;var n=ne(e,t.selection),r=ee(e.dependencies,t.selection),a={},i=0,s=null;n.forEach((function(t){void 0!==t&&t.forEach((function(t){var n=r.get(t);if(n){var c=ae(e,t),u=0,o=null;n.forEach((function(e){a[e].time>=u&&(u=a[e].time,o=e)})),a[t]={parent:o,time:c+u},c+u>i&&(i=c+u,s=t)}else{var l=ae(e,t);a[t]={parent:null,time:l}}}))}));for(var c=new Set;null!==a[s].parent;){var u=a[s].parent,o=s;c.add("".concat(o,"-").concat(u)),s=a[s].parent}return c},se=function(e,t){return function(e,t){for(var n=e.next();!n.done;n=e.next()){var r=t(n.value);if(void 0!==r)return r}}(t.entries(),(function(t){var n=Object(Y.a)(t,2),r=n[0];return n[1].includes(e)?r:void 0}))},ce=function(e,t){var n=function(e,t){if(void 0===e[-1])return new Map;for(var n=ee(e,t),r=K(n),a=new Map,i=r.get(-1).reduce((function(e,t,n){return a.set(n,[t]),e.push(t),e}),[]),s=function(){var e=i.shift(),t=se(e,a),n=r.get(e);n&&n.forEach((function(e){var n=se(e,a);if(void 0===n)a.get(t).push(e),i.push(e);else if(t!==n){var r;(r=a.get(t)).push.apply(r,Object(E.a)(a.get(n))),a.delete(n)}}))};0!==i.length;)s();return a}(e.dependencies,t.selection),r=0;return $(n.values(),(function(e,t){var n=r;return r+=1,t.reduce((function(e,t){return e.set(t,n)}),e)}),new Map)},ue=function(e,t){var n={selection:t},r=e.dependencies,a=e.retrievals,i=function(e,t,n,r){return t.filter((function(e){return n.selection.has(e.retrId)})).map((function(t){var n,a=t.retrId,i=t.timingInfo,s=t.type,c=t.measureProvider,u=t.measures,o=t.partitioning,l=t.location,f=t.childrenIds,d=void 0===f?[]:f,p=i.elapsedTime,m=void 0===p?[0]:p,h=i.startTime,v=void 0===h?[0]:h,g=Math.min.apply(Math,Object(E.a)(v)),y=Math.max.apply(Math,Object(E.a)(v.map((function(e,t){return e+m[t]}))))-g,b=(n=y)<5?20:n<20?35:n<100?50:65,I=150*r.get(a);return{id:a,name:a.toString(),childrenIds:d,isSelected:!1,details:{startTime:g,elapsedTime:y,startTimes:v,elapsedTimes:m,type:s,measureProvider:c,measures:u,partitioning:o,location:l},clusterId:-1,radius:b,yFixed:I,status:e[-1].includes(a)?"leaf":e[a]?null:"root"}})).sort((function(e,t){return e.id-t.id}))}(r,a,n,ne(e,n.selection).reduce((function(e,t,n){return t.reduce((function(e,t){return e.set(t,n)}),e)}),new Map)),s=function(e,t,n){var r=ee(e,n.selection),a=t.filter((function(e){return n.selection.has(e.retrId)})).reduce((function(e,t,n){return e.set(t.retrId,n)}),new Map);return $(r.entries(),(function(e,t){var n=Object(Y.a)(t,2),r=n[0],i=n[1];if(-1===r)return e;var s=a.get(r);return i.reduce((function(e,t){var n=a.get(t);return e.push({source:s,target:n,id:"".concat(r,"-").concat(t),critical:!1}),e}),e)}),[])}(r,a,n),c=ie(e,n);s.forEach((function(e){e.critical=c.has(e.id)}));var u=ce(e,n);return i.forEach((function(e){e.clusterId=u.get(e.id)})),{nodes:i,links:s}},oe=function(e,t){var n=t.map((function(e){return{selection:e}}));re(e,n);var r=e.map((function(e,t){var n=e.planInfo,r=n.clusterMemberId,a=(n.mdxPass||"Select_0").split("_"),i=parseInt(a[1],10);return{id:t,parentId:null,passType:a[0],pass:i,name:r}}));return function(e,t){t.forEach((function(t,n){t.retrievals.forEach((function(t){t.childrenIds=t.underlyingDataNodes.map((function(t){return e.find((function(e){return e.name===t})).id})),t.underlyingDataNodes.forEach((function(t){return e.find((function(e){return e.name===t})).parentId=n}))}))}))}(r,e),r},le=(n(110),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).clickNode=function(e){r.setState((function(t){var n=e===t.selectedNodeId?null:e,r=t.nodes;return r.forEach((function(t){t.id===e?t.isSelected=!0!==t.isSelected:t.isSelected=!1})),{selectedNodeId:n,nodes:r}}))},r.changeGraph=function(){var e;r.clickNode(null),(e=r.props).changeGraph.apply(e,arguments)},r.toggleDrawer=function(){r.setState((function(e){return{showDrawer:!0!==e.showDrawer}}))},r.selectMeasure=function(e){var t=e.measure,n=e.selected;r.setState((function(e){var a=e.selectedMeasures;if(n){if(a.includes(t))return{};var i=[].concat(Object(E.a)(a),[t]);return{selectedMeasures:i,selectedRetrievals:te({retrievals:r.props.query.retrievals,dependencies:r.props.query.dependencies,measures:i,selection:r.props.selection})}}var s=a.filter((function(e){return e!==t}));return{selectedMeasures:s,selectedRetrievals:0===s.length?null:te({retrievals:r.props.query.retrievals,dependencies:r.props.query.dependencies,measures:s,selection:r.props.selection})}}),(function(){return r.generateGraph()}))},r.state={showDrawer:!1,selectedMeasures:[],selectedRetrievals:null,nodes:[],links:[],selectedNodeId:null,epoch:0},r.svgRef=a.a.createRef(),r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.generateGraph()}},{key:"componentWillUnmount",value:function(){this.props.restart()}},{key:"generateGraph",value:function(){var e=this,t=this.props,n=t.query,r=t.selection,a=this.state,i=a.selectedRetrievals,c=a.epoch;if(void 0!==n){var u=ue(n,i||r),o=u.nodes,l=u.links,f=I.i(s.a.findDOMNode(this)).attr("width",window.innerWidth).attr("height",window.innerHeight-56),d=w()(o).map((function(e){return e.clusterId})),p=d.min(),m=d.max(),h=window.innerWidth/2,v=parseInt((m-p+1)/2+p-.5,10),g=I.f(o).force("charge",I.e().strength(-1e3)).force("link",I.d(l).distance(150)).force("collide",I.c().radius((function(e){return e.radius}))).force("forceY",I.h((function(e){return e.yFixed})).strength(1)).force("forceX",I.g((function(e){return h+(e.clusterId-v)*window.innerWidth/2})).strength(.1));I.i(window).on("resize",(function(){f.attr("width",window.innerWidth).attr("height",window.innerHeight-56)})),f.call(I.j().on("zoom",(function(){return e.clickNode(null),I.i("svg").select("g").attr("transform",I.b.transform)}))),g.on("tick",(function(){f.call(z)})),this.setState({nodes:o,links:l,epoch:c+1},(function(){f.selectAll("g.node").call(I.a().on("start",y).on("drag",E).on("end",b))}))}function y(e){I.b.active||g.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}function E(e){e.fx=I.b.x,e.fy=I.b.y}function b(e){I.b.active||g.alphaTarget(0),e.fx=null,e.fy=null}}},{key:"render",value:function(){var e=this,t=this.state,n=t.nodes,r=t.links,i=n.map((function(t){return a.a.createElement(W,{node:t,key:t.id,clickNode:e.clickNode,changeGraph:e.changeGraph})})),s=r.map((function(e){return a.a.createElement(J,{key:e.id,link:e,href:"/"})}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("svg",{className:"graph",ref:this.svgRef},a.a.createElement("g",{key:"e".concat(this.state.epoch)},s,i)),a.a.createElement("div",{className:"drawer-trigger ".concat(this.state.showDrawer?"open":""),variant:"outline-dark",onClick:this.toggleDrawer},"Menu"),a.a.createElement(b.a,{show:this.state.showDrawer,placement:"top-start",target:this.svgRef.current},a.a.createElement("div",{className:"drawer"},a.a.createElement(H,{measures:this.props.query.querySummary.measures,selectedMeasures:this.state.selectedMeasures,onSelectedMeasure:this.selectMeasure}))))}}]),n}(r.Component)),fe=n(85),de=n(66),pe=(n(111),new Map([["DistributedAggregatesRetrieval","Distributed Retrieval"],["DistributedPostProcessedRetrieval","PostProcessor"],["JITPrimitiveAggregatesRetrieval","JIT Retrieval"],["NoOpPrimitiveAggregatesRetrieval","No-op"],["PostProcessedAggregatesRetrieval","PostProcessor"],["PostProcessedResultsMerger","Merger"],["PrimitiveResultsMerger","Merger"],["RangeSharingPrimitiveAggregatesRetrieval","RangeSharing"]])),me=function(e,t,n){var r=t.lines,a=t.last,i=a.filter((function(e){return e<=n.start})),s=i.length>0?a.indexOf(Math.max.apply(Math,Object(E.a)(i))):r.length;return r[s]?r[s].push(n):r[s]=[n],a[s]=n.end,t},he=function(e){var t=e.retrievals,n=t.filter((function(e){return e.timingInfo.startTime&&e.timingInfo.elapsedTime})).map((function(e){return e.timingInfo.startTime.map((function(t,n){return{id:e.retrId,partition:n,start:t,end:e.timingInfo.elapsedTime[n]+t}}))})).flat().sort((function(e,t){return e.start-t.start})).reduce(me.bind(null,t),{lines:[],last:[]});return n.lines.sort((function(e,t){return e[e.length-1].end-t[t.length-1].end})),n.lines},ve=function(e){var t=e.row,n=e.idx,r=e.retrievals,i=e.selection,s=e.onSelect,c=t.map((function(e){return function(e){var t=e.rowIdx,n=e.entry,r=e.retrieval,i=e.selection,s=e.onSelect;if(void 0===r||n.id!==r.retrId)throw new Error("Inconsistent state: ".concat(JSON.stringify(n)," / ").concat(JSON.stringify(r)));var c=i.some((function(e){var t=Object(Y.a)(e,2),r=t[0],a=t[1];return n.id===r&&n.partition===a})),u="".concat(n.id,"-").concat(n.partition);if(n.start<n.end){var o=5*(n.start+1)-1,l=5*(n.end-n.start-1)+2;return a.a.createElement("rect",{key:u,className:"timeline-box ".concat(c?"selected":""),x:0+o,y:0+30*t,width:l,height:25,onClick:function(){return s(n)}})}var f=5*n.start+2;return a.a.createElement("rect",{key:u,className:"timeline-box ".concat(c?"selected":""),x:0+f,y:0+30*t,width:1,height:25,onClick:function(){return s(n)}})}({rowIdx:n,entry:e,retrieval:r[e.id],selection:i,onSelect:s})}));return a.a.createElement("g",{className:"timeline-row",key:n},c)},ge=function(e){var t=e.rows,n=e.retrievals,r=e.selection,i=e.onSelect,s=0+30*t.length-5,c=0+5*Math.max.apply(Math,Object(E.a)(t.map((function(e){return e[e.length-1]})).map((function(e){return e.end}))));return a.a.createElement("div",{className:"timeline-rows"},a.a.createElement("svg",{width:c,height:s},t.map((function(e,t){return ve({row:e,idx:t,retrievals:n,selection:r,onSelect:i})}))))},ye=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).selectBox=function(e){r.setState((function(t){var n=t.selection,r=Object(E.a)(n),a=n.findIndex((function(t){var n=Object(Y.a)(t,2),r=n[0],a=n[1];return r===e.id&&a===e.partition}));return a>=0?r.splice(a,1):r.push([e.id,e.partition]),{selection:r}}))},r.closeBox=function(e){var t=Object(Y.a)(e,2),n=t[0],a=t[1];r.setState((function(e){var t=e.selection,r=t.findIndex((function(e){var t=Object(Y.a)(e,2),r=t[0],i=t[1];return r===n&&i===a}));if(r>=0){var i=Object(E.a)(t);return i.splice(r,1),{selection:i}}return{}}))},r.state={lines:[],selection:[]},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.setState({lines:he(this.props.plan)})}},{key:"render",value:function(){var e=this,t=this.state,n=t.selection,r=t.lines,i=this.props.plan;return a.a.createElement("div",{className:"timeline"},a.a.createElement(ge,{rows:r,retrievals:i.retrievals,selection:n,onSelect:this.selectBox}),a.a.createElement("div",{className:"timeline-details"},a.a.createElement("div",{style:{width:355*n.length}},n.map((function(t){var n,r=Object(Y.a)(t,2),s=r[0],c=r[1],u=i.retrievals[s];return a.a.createElement(de.a,{key:u.retrId,className:"entry",onClose:function(){return e.closeBox(t)}},a.a.createElement(de.a.Header,null,"Retrieval\xa0",a.a.createElement("strong",{className:"mr-auto"},"#",s),a.a.createElement("small",null,(n=u.type,pe.get(n)||"<".concat(n,">")))),a.a.createElement(de.a.Body,{className:"body"},_(Object(fe.a)({},u,{},u.timingInfo,{partition:c}))))})))))}}],[{key:"getDerivedStateFromProps",value:function(e){return{lines:he(e.plan)}}}]),n}(r.Component),Ee=n(86),be=n(83),Ie=n(82),ke=new Map([["executionContextCreationTime","Context creation time"],["finalizationTime","Query preparation"],["planningTime","Planning duration"],["queryExecutionTime","Execution duration"]]),we=function(e){return e?a.a.createElement("ul",null,Object.entries(e.globalTimings).map((function(e){var t,n=Object(Y.a)(e,2),r=n[0],i=n[1];return a.a.createElement("li",{key:r},(t=r,ke.get(t)||"<unknown>"),": ",function(e){return"".concat(e," in ms")}(i)," (",i," ms)")}))):a.a.createElement("p",null,a.a.createElement("i",null,"Timings are not available"))},Oe=function(e){return Object(E.a)(new Array(e).keys())},je=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(l.a)(this,n),(r=t.call(this,e)).changeFilter=function(e){var t,n=e.target.value.trim();""===n?t=Object(E.a)(r.props.measures):t=new X.a(r.props.measures,void 0,{caseSensitive:!0}).search(n);t.sort(),r.setState({filtered:t})};var a=Object(E.a)(e.measures);return a.sort(),r.state={filter:"",filtered:a},r}return Object(f.a)(n,[{key:"render",value:function(){var e=this.state.filtered,t=parseInt(e.length/3,10),n=Oe(3),r=Oe(t);return a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,null,a.a.createElement(v.a.Group,null,a.a.createElement(v.a.Control,{type:"text",placeholder:"Measure name",defaultValue:this.state.filter,onChange:this.changeFilter}))),a.a.createElement(Ie.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},a.a.createElement("tbody",null,r.map((function(r){return a.a.createElement("tr",{key:r},n.map((function(n){var i=e[r+n*t],s=i||"m".concat(r+n*t);return a.a.createElement("td",{key:s},i)})))})))))}}]),n}(r.Component),xe=function(e){var t=e.querySummary,n=e.planInfo;return a.a.createElement("div",null,a.a.createElement("p",null,"Total number of retrievals: ",t.totalRetrievals),a.a.createElement("h4",null,"Query timings"),we(n),a.a.createElement("h4",null,"Measures"),a.a.createElement(je,{measures:t.measures}),a.a.createElement("h4",null,"Retrievals per type"),a.a.createElement("ul",null,Object.entries(t.retrievalCountByType).map((function(e){var t=Object(Y.a)(e,2),n=t[0],r=t[1];return a.a.createElement("li",{key:n},a.a.createElement("b",null,n),": ",r)}))),a.a.createElement("h4",null,"Retrievals per partitioning"),a.a.createElement("ul",null,Object.entries(t.partitioningCountByType).map((function(e){var t=Object(Y.a)(e,2),n=t[0],r=t[1];return a.a.createElement("li",{key:n},a.a.createElement("b",null,n),": ",r)}))))},Se=function(e){var t,n=e.queries,r=e.currentQuery,i=e.info,s=function(e,t){for(var n=e[t];null!==n.parentId;)n=e[n.parentId];return n}(i,r),c=s.id,u=n[c],o=i.filter((function(e){return e.parentId===c}));if(0===u.retrievals.length)t="Empty query (MDX interal operation)";else if(o.length>0){var l={id:n.length,name:"Global summary"},f=function(e,t,n){var r=[t].concat(Object(E.a)(n)).map((function(t){return e[t.id].querySummary})),a=r.reduce((function(e,t){return t.measures.reduce((function(e,t){return e.add(t)}),e)}),new Set),i=r.reduce((function(e,t){return e+t.totalRetrievals}),0),s=r.reduce((function(e,t){return Object.entries(t.retrievalCountByType).reduce((function(e,t){var n=Object(Y.a)(t,2),r=n[0],a=n[1];return Reflect.has(e,r)?e[r]+=a:e[r]=a,e}),e)}),{}),c=r.reduce((function(e,t){return Object.entries(t.partitioningCountByType).reduce((function(e,t){var n=Object(Y.a)(t,2),r=n[0],a=n[1];return Reflect.has(e,r)?e[r]+=a:e[r]=a,e}),e)}),{});return{measures:Object(E.a)(a),totalRetrievals:i,retrievalCountByType:s,partitioningCountByType:c}}(n,s,o),d=[l,s].concat(Object(E.a)(o));t=function(e){var t=e.queries,n=e.pivots,r=e.selected;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h4",null,"Underlying queries"),a.a.createElement(Ee.a,{defaultActiveKey:n[r].name},n.map((function(e){return a.a.createElement(be.a,{eventKey:e.name,title:e.name,key:e.name},xe(t[e.id]))}))))}({pivots:d,queries:[].concat(Object(E.a)(n),[{querySummary:f}]),selected:d.findIndex((function(e){return e.id===r}))})}else t=xe(u);return a.a.createElement("div",null,a.a.createElement("h3",null,"MDX pass ",s.passType," (",r,")"),t)},Me=n(24),Te=n(74),Ce=function(e){var t=e.navigate,n=e.goBackButton,r=e.passChooser;return a.a.createElement(Te.a,{bg:"dark",variant:"dark"},a.a.createElement(Te.a.Brand,{href:""},"QueryViz"),a.a.createElement(Me.a,{className:"mr-auto"},a.a.createElement(Me.a.Link,{href:"",onClick:function(){return t("input")}},"Input"),a.a.createElement(Me.a.Link,{href:"",onClick:function(){return t("summary")}},"Summary"),a.a.createElement(Me.a.Link,{href:"",onClick:function(){return t("graph")}},"Graph"),a.a.createElement(Me.a.Link,{href:"",onClick:function(){return t("timeline")}},"Timeline")),a.a.createElement(Me.a,{className:"ml-auto"},r,n))},Re=/Retrieval #(\d+): ([\w_]+)( \(see)?/,Ne=/\s*([\w\-_ ()]+)= (.+)\s*/,Pe=/\s*(\w+)\s+\[id=(.+?), epoch=(\d+)]/,qe=/\s*([\w\-_ ()]+?)\s*: (.+)\s*/,Ge=/(?:^|\s+)Result for (\d+)\s*: (EMPTY|.*)/,Fe=/which depends on \{/,Be=/^\s*}\s*$/,De={Continuous:"continuous","Range sharing":"rangeSharing","Missed prefectches":"missedPrefetchBehavior",Cache:"aggregatesCache"},Ae={"Planning time":"PLANNING","Execution context creation time":"CONTEXT","Planning finalization time":"FINALIZATION"},Qe={"General information:":function(e,t){var n=qe.exec(t),r=Object(Y.a)(n,3),a=r[1],i=r[2];if("ActivePivot"===a){var s=Pe.exec(i),c=Object(Y.a)(s,4),u=c[1],o=c[2],l=c[3];e.info.pivotType=u,e.info.pivotId=o,e.info.epoch=l}else"RetrieverActivePivotAggregatesRetriever"===a&&(e.info.retrieverType=i)},"Context values:":function(e,t){var n=qe.exec(t),r=Object(Y.a)(n,3),a=r[1],i=r[2];"ICubeFilter"===a?e.rootFilter=i:e.info.contextValues[a]=i},"Additional properties:":function(e,t){var n=qe.exec(t),r=Object(Y.a)(n,3),a=r[1],i=r[2],s=De[a];s&&(e.info[s]=i)},"Planning:":function(e,t){var n=qe.exec(t),r=Object(Y.a)(n,3),a=r[1],i=r[2],s=Ae[a];s&&(e.info.globalTimings[s]=parseInt(i,10))},"Execution:":function(e,t){var n=qe.exec(t),r=Object(Y.a)(n,3),a=r[1],i=r[2];"Total query execution time"===a&&(e.info.globalTimings.EXECUTION=parseInt(i,10))},"Query plan:":function(e,t){var n=new Map;n.set(Re,(function(t){var n=function(e,t){return{id:parseInt(t[1],10),type:t[2],ref:void 0!==t[3],dependencies:[],parents:[],properties:{}}}(0,t);n.ref?e.current=e.retrievals[n.id]:(e.current=n,e.retrievals[n.id]=n);var r,a=(r=e.parents).length>0?r[r.length-1]:void 0;a&&a.dependencies.push(parseInt(n.id,10))})),n.set(Ge,(function(t){var n=t[1];if("EMPTY"!==t[2]){var r=e.current.properties["Contributed partitions"]||[];r.push(n),e.current.properties["Contributed partitions"]=r}})),n.set(Ne,(function(t){var n=function(e,t){return{key:t[1],value:t[2]}}(0,t);e.current.properties[n.key]=n.value})),n.set(Fe,(function(){return e.parents.push(e.current)})),n.set(Be,(function(){return e.parents.pop()})),function(e,t){for(var n=t.entries(),r=n.next();!r.done;r=n.next()){var a=Object(Y.a)(r.value,2),i=a[0],s=a[1],c=i.exec(e);if(null!==c)return void s(c)}}(t,n)},"Query Plan Summary:":function(){}},Le=function(e,t){var n=e.last;return e.last=t,!(t in Qe)&&(t.includes("-----")?(e.phase=n,!1):void 0!==e.phase)},ze=function(e,t){return new Promise((function(n){var r={info:{contextValues:{},globalTimings:{}},root:{dependencies:[]},retrievals:{},current:null,parents:[]};r.parents.push(r.root);var a=e.split(/\n/),i=0;!function e(){if(i<a.length){var s=Math.min(i+100,a.length);!function(e,t,n,r){for(var a=n;a<r;a+=1){var i=t[a].trim();/^\s*$/.test(i)?e.phase=void 0:Le(e,i)&&Qe[e.phase](e,i)}}(r,a,i,s),t(i=s,a.length),setTimeout(e,5)}else n(r)}()})).then((function(e){return Object.keys(e.retrievals).forEach((function(t){e.retrievals[t].dependencies.forEach((function(n){e.retrievals[n].parents.push(parseInt(t,10))}))})),e}))},Je=function(e,t,n){return t in e||(e[t]=n),e[t]},Ve=/([\w\s]+)@([\w\s]+):([\w\s\\]+)=(.+)/,Ue=function(e){var t=e["Start time   (in ms)"],n=e["Elapsed time (in ms)"];return t&&n?{startTime:JSON.parse(t),elapsedTime:JSON.parse(n)}:{}},_e=function(e,t){if("Global query filter"===t||void 0===t)return 0;var n=Object.entries(e),r=n.findIndex((function(e){return e[1]===t}));return n[r][0]},We=function(e,t,n){return Math.max.apply(Math,Object(E.a)(n[e].map((function(e){return t.get(parseInt(e,10)).timingInfo})).map((function(e){var t=e.startTime;return t?t[0]:0}))))+10},Xe=function(e,t){var n=function(e){return Object.keys(e).map((function(e){return parseInt(e,10)})).reduce((function(t,n){return e[n].map((function(e){return parseInt(e,10)})).reduce((function(e,t){var r=e.get(t);return r||(r=new Set,e.set(t,r)),r.add(n),e}),t)}),new Map)}(t),r=e.reduce((function(e,t){return e.set(t.retrId,t),e}),new Map);e.forEach((function(e){if(!e.type.includes("NoOp")){e.timingInfo.elapsedTime=[10];var n=t[e.retrId];e.timingInfo.startTime=[n?-n.length:0]}}));for(var a=e.filter((function(e){return e.type.includes("NoOp")||0===e.timingInfo.startTime[0]})).map((function(e){return e.retrId})),i=0;a.length>0;){if(i>5e3)return void console.log("oops. Too much");i+=1;var s=a.shift();n.get(s).forEach((function(e){var n=r.get(e);-1!==e&&0===++n.timingInfo.startTime[0]&&(n.timingInfo.startTime[0]=We(e,r,t),a.push(e))}))}var c=e.filter((function(e){return e.timingInfo.startTime&&e.timingInfo.startTime[0]<0})).map((function(e){return e.retrId}));if(c.length>0)throw new Error("Remaining retrievals without timings: ".concat(c))},He=function(e){var t=function(e){return Object.values(e.retrievals).reduce((function(e,t){return 0===t.parents.length?Je(e,"-1",[]).push(t.id):t.parents.forEach((function(n){return Je(e,n,[]).push(t.id)})),e}),{"-1":[]})}(e),n=function(e){for(var t={},n=Object.values(e.retrievals).reduce((function(e,t){var n=t.properties.Filter;return n&&!e.has(n)&&e.set(n,e.size),e}),new Map([["Global query filter",0]])).entries(),r=n.next();!r.done;r=n.next()){var a=Object(Y.a)(r.value,2),i=a[0];t[a[1]]="Global query filter"===i?e.rootFilter:i}return t}(e),r=function(e,t){return Object.values(e.retrievals).map((function(e){return{retrId:parseInt(e.id,10),type:e.type,location:(r=e.properties.Location,void 0===r||"GRAND TOTAL"===r?[]:r.split(/\s*,\s*/).map((function(e){var t=Ve.exec(e),n=t[3].split(/\\/),r=t[4].split(/\\/).map((function(e){return"["===e[0]?e.substring(1,e.length-1):e}));return{dimension:t[1],hierarchy:t[2],level:n,path:r}}))),measures:(n=e.properties.Measures,void 0===n?[]:n.substring(1,n.length-1).split(/\s*,\s*/)),timingInfo:Ue(e.properties),partitioning:e.properties.Partitioning,filterId:_e(t,e.properties.Filter),measureProvider:e.properties["Measures provider"],underlyingDataNodes:[]};var n,r}))}(e,n);void 0===r[0].timingInfo.startTime&&Xe(r,t);var a=function(e){var t=w()(e).flatMap((function(e){return e.measures})).uniq().value(),n=w.a.countBy(e,(function(e){return e.type})),r=w.a.countBy(e,(function(e){return e.partitioning}));return{measures:t,totalRetrievals:w.a.size(e),retrievalCountByType:n,partitioningCountByType:r}}(r);return[{planInfo:e.info,dependencies:t,queryFilters:n,retrievals:r,querySummary:a}]},Ye=new Map,$e=function(e){var t=Ye.get(e);if(t)return t;var n=new Promise((function(t,n){fetch("".concat(e,"/versions/rest")).then(function(){var n=Object(o.a)(u.a.mark((function n(r){var a,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.json();case 2:a=n.sent,i=a.apis.pivot.versions[0].restPath,t("".concat(e).concat(i));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),(function(t){console.error("Cannot find version of ".concat(e),t),Ye.delete(e),n(new Error("Unavailable"))}))}));return Ye.set(e,n),n},Ke=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r,a,i,s,c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.credentials,a=t.query,e.next=3,$e(n);case 3:return i=e.sent,s="".concat(i,"/cube/query/mdx/queryplan"),c={mdx:a},e.next=8,fetch(s,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json",Authorization:r},body:JSON.stringify(c)});case 8:return o=e.sent,e.next=11,o.json();case 11:return l=e.sent,e.abrupt("return",l.data);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(e,t){return null!==e?a.a.createElement("input",{className:"btn btn-outline-light ml-3",type:"button",value:"Go Back To Parent Query",onClick:function(){return t(e)}}):a.a.createElement(a.a.Fragment,null)},et=n(119),tt=function(e){var t=e.pass,n=e.passType;return"[".concat(t,"] - ").concat(n)},nt=function(e,t,n){var r=e.filter((function(e){return null===e.parentId})).sort((function(e,t){return t.pass-e.pass}));if(r.length>1){var i=r.find((function(e){return e.pass===t})),s=i?tt(i):"Query pass";return a.a.createElement(et.a,{title:s,id:"basic-nav-dropdown",alignRight:!0},r.map((function(e){return a.a.createElement(et.a.Item,{key:e.pass,as:"button",active:e.pass===t,onClick:function(){return n(e.pass)}},tt(e))})))}return a.a.createElement(a.a.Fragment,null)},rt=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(l.a)(this,n),(r=t.call(this,e)).passInput=function(){var e=Object(o.a)(u.a.mark((function e(t,n,a){var i,s,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("json"!==t){e.next=5;break}i=JSON.parse(a).data,e.next=16;break;case 5:if("url"!==t){e.next=11;break}return e.next=8,Ke(a);case 8:i=e.sent,e.next=16;break;case 11:if("v1"!==t){e.next=16;break}return e.next=14,ze(a,(function(){}));case 14:s=e.sent,i=He(s);case 16:c=Z(i),o=oe(i,c),r.setState({selections:c,allQueries:o,currentQueryId:o.filter((function(e){return 0===e.pass})).find((function(e){return null===e.parentId})).id,router:"summary",json:i,lastInput:a});case 19:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.changeGraph=function(e){r.setState({currentQueryId:e,restartGraph:!0})},r.changePass=function(e){var t=r.state.allQueries.filter((function(t){return t.pass===e})).find((function(e){return null===e.parentId})).id;r.changeGraph(t),r.setState({currentPassId:e})};return r.state={selections:new Set,router:"input",allQueries:[],currentQueryId:0,currentPassId:0,restartGraph:!1,lastInput:""},r}return Object(f.a)(n,[{key:"renderSummary",value:function(){if(!this.state.json)return a.a.createElement("p",null,"Load a query plan first!");var e=this.state,t=e.currentQueryId,n=e.allQueries,r=e.json;return a.a.createElement(Se,{info:n,queries:r,currentQuery:t})}},{key:"renderGraph",value:function(){var e=this;if(!this.state.json)return a.a.createElement("p",null,"Load a query plan first!");var t=this.state,n=t.currentQueryId,r=t.allQueries,i=t.selections,s=this.state.json[n];return a.a.createElement(le,{className:"my-0",selection:i[n],query:s,details:r[n],restart:function(){return e.setState({restartGraph:!1})},changeGraph:this.changeGraph})}},{key:"renderTimeline",value:function(){if(!this.state.json)return a.a.createElement("p",null,"Load a query plan first!");var e=this.state.currentQueryId;return a.a.createElement(ye,{plan:this.state.json[e||0]})}},{key:"renderPassChooser",value:function(){var e=this.state,t=e.allQueries,n=e.currentPassId,r=e.router;return"graph"===r||"timeline"===r?nt(t,n,this.changePass):null}},{key:"render",value:function(){var e=this,t=this.state,n=t.allQueries,r=t.currentQueryId,i=t.restartGraph,s=t.router,c=t.lastInput,u=(n[r]||{}).parentId,o=void 0===u?null:u;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ce,{navigate:function(t){return e.setState({router:t})},dataIsEmpty:!0,goBackButton:Ze(o,this.changeGraph),passChooser:this.renderPassChooser()}),a.a.createElement("main",{role:"main",className:"container-fluid px-0"},"input"===s&&a.a.createElement(y,{passInput:this.passInput,lastInput:c}),"summary"===s&&this.renderSummary(),"graph"===s&&!i&&this.renderGraph(),"timeline"===s&&this.renderTimeline()))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(112);s.a.render(a.a.createElement(rt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},97:function(e,t,n){e.exports=n(113)}},[[97,1,2]]]);
//# sourceMappingURL=main.4087b307.chunk.js.map